ALTER TABLE fook_manager
	DROP
		CONSTRAINT fook_manager_fk
		CASCADE;

ALTER TABLE fook_food
	DROP
		CONSTRAINT fook_food_category_id_fk
		CASCADE;

ALTER TABLE fook_food
	DROP
		CONSTRAINT fook_food_manager_id_fk
		CASCADE;

ALTER TABLE fook_payment
	DROP
		CONSTRAINT fook_payment_fk
		CASCADE;

ALTER TABLE fook_payment_detail
	DROP
		CONSTRAINT fook_payment_detail_fk
		CASCADE;

ALTER TABLE fook_payment_detail
	DROP
		CONSTRAINT fook_payment_detail_fk
		CASCADE;

ALTER TABLE fook_user
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_manager
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_job
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_food
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_category
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_payment
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

ALTER TABLE fook_payment_detail
	DROP
		PRIMARY KEY
		CASCADE
		KEEP INDEX;

/* fook_user */
DROP TABLE fook_user 
	CASCADE CONSTRAINTS;

/* fook_manager */
DROP TABLE fook_manager 
	CASCADE CONSTRAINTS;

/* fook_job */
DROP TABLE fook_job 
	CASCADE CONSTRAINTS;

/* fook_food */
DROP TABLE fook_food 
	CASCADE CONSTRAINTS;

/* fook_category */
DROP TABLE fook_category 
	CASCADE CONSTRAINTS;

/* fook_payment */
DROP TABLE fook_payment 
	CASCADE CONSTRAINTS;

/* fook_payment_detail */
DROP TABLE fook_payment_detail 
	CASCADE CONSTRAINTS;

/* fook_user */
CREATE TABLE fook_user (
	user_id VARCHAR2(32) NOT NULL, /* 유저ID */
	password VARCHAR2(32), /* 비밀번호 */
	name VARCHAR2(32), /* 이름 */
	phone_first VARCHAR2(3), /* 핸드폰번호1 */
	phone_middle VARCHAR2(4), /* 핸드폰번호2 */
	phone_last VARCHAR2(4), /* 핸드폰번호3 */
	user_point NUMBER, /* 사용가능포인트 */
	password_quiz VARCHAR2(80), /* 비밀번호퀴즈 */
	password_answer VARCHAR2(80), /* 비밀번호답변 */
	join_date DATE DEFAULT sysdate, /* 가입일 */
	secession_date DATE, /* 탈퇴일 */
	enable VARCHAR2(1)  /* 활성화여부 */
);

ALTER TABLE fook_user
	ADD
		CONSTRAINT PK_fook_user
		PRIMARY KEY (
			user_id
		);

/* fook_manager */
CREATE TABLE fook_manager (
	manager_id VARCHAR2(32) NOT NULL, /* 관리자ID */
	name VARCHAR2(32), /* 이름 */
	password VARCHAR2(32), /* 비밀번호 */
	phone_first VARCHAR2(3), /* 핸드폰번호1 */
	phone_middle VARCHAR2(4), /* 핸드폰번호2 */
	phone_last VARCHAR2(4), /* 핸드폰번호3 */
	job_id VARCHAR2(32), /* 직업코드 */
	hire_date DATE DEFAULT sysdate, /* 입사일 */
	address_zip VARCHAR2(6), /* 우편번호 */
	address VARCHAR2(160), /* 주소 */
	email VARCHAR2(32), /* 이메일 */
	email_domain VARCHAR2(32) /* 이메일_도메인 */
);

ALTER TABLE fook_manager
	ADD
		CONSTRAINT PK_fook_manager
		PRIMARY KEY (
			manager_id
		);

/* fook_job */
CREATE TABLE fook_job (
	job_id VARCHAR2(32) NOT NULL, /* 직급ID */
	job_name VARCHAR2(64), /* 직급 */
	grade_level VARCHAR2(1) /* 보안등급 */
);

ALTER TABLE fook_job
	ADD
		CONSTRAINT PK_fook_job
		PRIMARY KEY (
			job_id
		);

/* fook_food */
CREATE TABLE fook_food (
	food_id VARCHAR2(64) NOT NULL, /* 음식ID */
	food_name VARCHAR2(64), /* 음식이름 */
	category_id NUMBER(2) NOT NULL, /* 카테고리ID */
	price NUMBER(6), /* 가격 */
	point NUMBER(6), /* 포인트 */
	description VARCHAR2(1024), /* 설명 */
	image_address VARCHAR2(128), /* 이미지주소 */
	manager_id VARCHAR2(32), /* 관리자ID */
	create_date DATE DEFAULT sysdate, /* 생성일 */
	enable VARCHAR2(1) /* 활성화여부 */
);

ALTER TABLE fook_food
	ADD
		CONSTRAINT food
		PRIMARY KEY (
			food_id
		);

/* fook_category */
CREATE TABLE fook_category (
	category_id NUMBER(2) NOT NULL, /* 카테고리ID */
	category_name VARCHAR2(64) /* 카테고리_이름 */
);

ALTER TABLE fook_category
	ADD
		CONSTRAINT categories
		PRIMARY KEY (
			category_id
		);

/* fook_payment */
CREATE TABLE fook_payment (
	payment_id VARCHAR2(32) NOT NULL, /* 결제ID */
	user_id VARCHAR2(32) NOT NULL, /* 유저ID */
	payment_date DATE DEFAULT sysdate, /* 결제일 */
	total_price NUMBER, /* 총가격 */
	save_point NUMBER DEFAULT 0, /* 총획득포인트 */
	used_point NUMBER DEFAULT 0, /* 결제시사용포인트 */
	card NUMBER DEFAULT 0, /* 카드금액 */
	cash NUMBER DEFAULT 0, /* 현금금액 */
	payment_state VARCHAR2(1) /* 결제상태 */
);

ALTER TABLE fook_payment
	ADD
		CONSTRAINT PK_fook_payment
		PRIMARY KEY (
			payment_id
		);

/* fook_payment_detail */
CREATE TABLE fook_payment_detail (
	payment_id VARCHAR2(32) NOT NULL, /* 결제_ID */
	food_id VARCHAR2(64) NOT NULL, /* 음식ID */
	food_name VARCHAR2(64), /* 음식이름 */
	price NUMBER, /* 가격 */
	count NUMBER, /* 수량 */
	point NUMBER DEFAULT 0 /* 획득포인트 */
);

ALTER TABLE fook_payment_detail
	ADD
		CONSTRAINT fook_payment_detail_pk
		PRIMARY KEY (
			payment_id,
			food_id
		);

ALTER TABLE fook_manager
	ADD
		CONSTRAINT fook_manager_fk
		FOREIGN KEY (
			job_id
		)
		REFERENCES fook_job (
			job_id
		);

ALTER TABLE fook_food
	ADD
		CONSTRAINT fook_food_category_id_fk
		FOREIGN KEY (
			category_id
		)
		REFERENCES fook_category (
			category_id
		);

ALTER TABLE fook_food
	ADD
		CONSTRAINT fook_food_manager_id_fk
		FOREIGN KEY (
			manager_id
		)
		REFERENCES fook_manager (
			manager_id
		);

ALTER TABLE fook_payment
	ADD
		CONSTRAINT fook_payment_fk
		FOREIGN KEY (
			user_id
		)
		REFERENCES fook_user (
			user_id
		);

ALTER TABLE fook_payment_detail
	ADD
		CONSTRAINT payment_detail_payment_id_fk
		FOREIGN KEY (
			payment_id
		)
		REFERENCES fook_payment (
			payment_id
		);

ALTER TABLE fook_payment_detail
	ADD
		CONSTRAINT payment_detail_food_id_fk
		FOREIGN KEY (
			food_id
		)
		REFERENCES fook_food (
			food_id
		);
insert into fook_category values(1, '한식');
insert into fook_category values(2, '중식');
insert into fook_category values(3, '일식');
insert into fook_category values(4, '양식');

commit;
rollback;

drop SEQUENCE food_id_seq;
CREATE SEQUENCE food_id_seq
       INCREMENT BY 1
       START WITH 1
       MINVALUE 0
       MAXVALUE 9999;
--한식 테스트 메뉴
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '한식 ' || food_id_seq.currval, 12, '맛있는 한식입니다!!!', 1, 16000, '/kitri/foodCourt/user/menu/menuImage/junjoobibimbab.jpg');
--중식 테스트 메뉴
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식검색 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식검색 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식검색 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '중식검색 ' || food_id_seq.currval, 12, '맛있는 중식입니다!!!', 2, 16000, '/kitri/foodCourt/user/menu/menuImage/joongsic.jpg');
--일식 테스트 메뉴
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '일식 ' || food_id_seq.currval, 12, '맛있는 일식입니다!!!', 3, 16000, '/kitri/foodCourt/user/menu/menuImage/ilsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '일식 ' || food_id_seq.currval, 12, '맛있는 일식입니다!!!', 3, 16000, '/kitri/foodCourt/user/menu/menuImage/ilsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '일식검색 ' || food_id_seq.currval, 12, '맛있는 일식입니다!!!', 3, 16000, '/kitri/foodCourt/user/menu/menuImage/ilsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '일식 ' || food_id_seq.currval, 12, '맛있는 일식입니다!!!', 3, 16000, '/kitri/foodCourt/user/menu/menuImage/ilsic.jpg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '일식 ' || food_id_seq.currval, 12, '맛있는 일식입니다!!!', 3, 16000, '/kitri/foodCourt/user/menu/menuImage/ilsic.jpg');
--양식 테스트 메뉴
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');
insert into fook_food(food_id, food_name, point, description, category_id, price, image_address) 
values(food_id_seq.nextval, '양식검색 ' || food_id_seq.currval, 12, '맛있는 양식입니다!!!', 4, 16000, '/kitri/foodCourt/user/menu/menuImage/yangsic.jpeg');


select * from fook_food;
select * from fook_category;
delete from fook_category;
delete from fook_food;
commit;
select food_name, image_address, food_id from fook_food where food_name like '%한식%';
select food_name, image_address, food_id from fook_food where food_name like '%한식%';
select food_id_seq.currval from dual;
